class t{constructor(t){this.title=t.title,this.price=t.price,this.discountPercentage=t.discountPercentage,this.stock=t.stock,this.rating=t.rating,this.category=t.category,this.thumbnail=t.thumbnail}getDiscountedPrice(){return Math.round(this.price*(1-this.discountPercentage/100)*100)/100}updateStock(){this.stock>0&&this.stock--}getTitle(){return this.title}getThumbnailURL(){return this.thumbnail}getStock(){return this.stock}getRating(){return this.rating}getCategory(){return this.category}}const e=async()=>{try{let e=await fetch("https://dummyjson.com/products");if(!e.ok)throw Error("Failed to fetch products");return(await e.json()).products.map(e=>new t(e))}catch(t){return console.error(t),[]}},r=t=>{let e=document.querySelector("#productCardContainer");e.innerHTML="",t.forEach(t=>{let r=document.createElement("div"),i=document.createElement("button"),c=t.getTitle().toLowerCase().replace(/\s+/g,"-");r.classList.add("product-card"),r.id=c,r.innerHTML=`
      <img src="${t.getThumbnailURL()}" alt="${t.getTitle()}">
      <div>
        <h2>${t.getTitle()}</h2>
        <h2>\u{2B50}${t.getRating()}</h2>
      </div>
      <div>
        <p>$${t.getDiscountedPrice()}</p>
        <h2 class='stock'>\u{1F4E6}${t.getStock()}</h2>
      </div>
    `,e.append(r),i.innerText="Add to cart",r.append(i),i.addEventListener("click",()=>{t.updateStock(),document.querySelector(`#${c} .stock`).innerText=`\u{1F4E6}`+t.getStock()})})},i=(t,e)=>t.filter(t=>t.getCategory().toLowerCase()===e.toLowerCase()),c=(t,e)=>t.filter(t=>t.getDiscountedPrice()<=e);function n(t,e){return"rate-des"===e?[...t].sort((t,e)=>e.getRating()-t.getRating()):"rate-asc"===e?[...t].sort((t,e)=>t.getRating()-e.getRating()):"price-des"===e?[...t].sort((t,e)=>e.getDiscountedPrice()-t.getDiscountedPrice()):"price-asc"===e?[...t].sort((t,e)=>t.getDiscountedPrice()-e.getDiscountedPrice()):t}const o=document.querySelector("#sortSelect"),a=document.querySelector("#filterForm");if(!o||!a)throw Error("Viktiga DOM-element kunde inte hittas!");let s=[],u=[];(async()=>{try{u=s=await e(),r(s)}catch(t){console.error("Fel vid hÃ¤mtning av produkter:",t)}})(),a.addEventListener("submit",t=>{t.preventDefault();let e=a.querySelector("select").value,d=a.querySelector("input"),l=d.value?parseFloat(d.value):NaN;u=e?i(s,e):s,isNaN(l)||(u=c(u,l)),r(n(u,o.value))}),o.addEventListener("change",()=>{let t=o.value;r(n(u,t))});
//# sourceMappingURL=index.f2c795af.js.map
