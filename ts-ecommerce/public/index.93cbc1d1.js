class t{constructor(t){this.title=t.title,this.price=t.price,this.discountPercentage=t.discountPercentage,this.stock=t.stock,this.rating=t.rating,this.category=t.category,this.thumbnail=t.thumbnail}getDiscountedPrice(){return Math.round(this.price*(1-this.discountPercentage/100)*100)/100}updateStock(){this.stock>0&&this.stock--}getTitle(){return this.title}getThumbnailURL(){return this.thumbnail}getStock(){return this.stock}getRating(){return this.rating}getCategory(){return this.category}}const e=async()=>{try{let e=await fetch("https://dummyjson.com/products?limit=100");if(!e.ok)throw Error("Failed to fetch products");let r=await e.json();return console.log("Alla kategorier fr책n API:",[...new Set(r.products.map(t=>t.category))]),r.products.map(e=>new t(e))}catch(t){return console.error("Fel vid h채mtning:",t),[]}},r=t=>{let e=document.querySelector("#productCardContainer");e.innerHTML="",t.forEach(t=>{let r=document.createElement("div"),i=document.createElement("button"),c=t.getTitle().toLowerCase().replace(/\s+/g,"-");r.classList.add("product-card"),r.id=c,r.innerHTML=`
      <img src="${t.getThumbnailURL()}" alt="${t.getTitle()}">
      <div>
        <h2>${t.getTitle()}</h2>
        <h2>\u{2B50}${t.getRating()}</h2>
      </div>
      <div>
        <p>$${t.getDiscountedPrice()}</p>
        <h2 class='stock'>\u{1F4E6}${t.getStock()}</h2>
      </div>
    `,e.append(r),i.innerText="Add to cart",r.append(i),i.addEventListener("click",()=>{t.updateStock(),document.querySelector(`#${c} .stock`).innerText=`\u{1F4E6}`+t.getStock()})})},i=(t,e)=>{let r={electronics:["laptops","mobile-accessories"],beauty:["beauty"],"mens-shoes":["mens-shoes"]}[e]||[e];return t.filter(t=>r.includes(t.getCategory().toLowerCase()))},c=(t,e)=>t.filter(t=>t.getDiscountedPrice()<=e);function o(t,e){return"rate-des"===e?[...t].sort((t,e)=>e.getRating()-t.getRating()):"rate-asc"===e?[...t].sort((t,e)=>t.getRating()-e.getRating()):"price-des"===e?[...t].sort((t,e)=>e.getDiscountedPrice()-t.getDiscountedPrice()):"price-asc"===e?[...t].sort((t,e)=>t.getDiscountedPrice()-e.getDiscountedPrice()):t}const n=document.querySelector("#sortSelect"),s=document.querySelector("#filterForm");if(!n||!s)throw Error("Viktiga DOM-element kunde inte hittas!");let a=[],u=[];(async()=>{try{u=a=await e(),r(a)}catch(t){console.error("Fel vid h채mtning av produkter:",t)}})(),s.addEventListener("submit",t=>{t.preventDefault();let e=s.querySelector("select").value.toLowerCase(),l=s.querySelector("input"),d=l.value?parseFloat(l.value):NaN;u=e?i(a,e):a,isNaN(d)||(u=c(u,d)),r(u=o(u,n.value))}),n.addEventListener("change",()=>{console.log("Sorteringsval 채ndrat till:",n.value),r(u=o(u,n.value))});
//# sourceMappingURL=index.93cbc1d1.js.map
